<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Openwrt on 周杰个人博客</title><link>/tags/openwrt/</link><description>Recent content in Openwrt on 周杰个人博客</description><generator>Hugo</generator><language>zh-CN</language><lastBuildDate>Tue, 22 Apr 2025 00:00:00 +0000</lastBuildDate><atom:link href="/tags/openwrt/index.xml" rel="self" type="application/rss+xml"/><item><title>OpenWrt哪吒监控Agent一键安装脚本</title><link>/archives/2666.html</link><pubDate>Tue, 22 Apr 2025 00:00:00 +0000</pubDate><guid>/archives/2666.html</guid><description>&lt;h1 id="openwrt哪吒监控agent一键安装脚本"&gt;OpenWrt哪吒监控Agent一键安装脚本&lt;/h1&gt;
&lt;h2 id="项目简介"&gt;项目简介&lt;/h2&gt;
&lt;p&gt;这是一个用于在OpenWrt系统上安装哪吒监控Agent的一键安装脚本。哪吒监控是一个开源的服务器监控系统，可以帮助您实时监控服务器的运行状态。 脚本会自动从官方github仓库下载最新版本的Agent，并进行安装。&lt;/p&gt;
&lt;h2 id="系统要求"&gt;系统要求&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;OpenWrt系统&lt;/li&gt;
&lt;li&gt;Root权限&lt;/li&gt;
&lt;li&gt;网络连接&lt;/li&gt;
&lt;li&gt;支持的系统架构：
&lt;ul&gt;
&lt;li&gt;x86_64 (amd64)&lt;/li&gt;
&lt;li&gt;aarch64/arm64&lt;/li&gt;
&lt;li&gt;armv7l/armv6l&lt;/li&gt;
&lt;li&gt;mips&lt;/li&gt;
&lt;li&gt;mips64&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="安装步骤"&gt;安装步骤&lt;/h2&gt;
&lt;h3 id="一键安装命令"&gt;一键安装命令&lt;/h3&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;wget -O nezha_openwrt.sh https://raw.githubusercontent.com/vbskycn/nezha_openwrt/main/nezha_openwrt.sh &amp;amp;&amp;amp; chmod +x nezha_openwrt.sh &amp;amp;&amp;amp; ./nezha_openwrt.sh
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="国内网无法访问github的用下面的如果失效请自己更换代理"&gt;国内网无法访问github的用下面的，如果失效请自己更换代理&lt;/h4&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;wget -O nezha_openwrt.sh https://gh-proxy.com/raw.githubusercontent.com/vbskycn/nezha_openwrt/main/nezha_openwrt.sh &amp;amp;&amp;amp; chmod +x nezha_openwrt.sh &amp;amp;&amp;amp; ./nezha_openwrt.sh
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="分步安装"&gt;分步安装&lt;/h3&gt;
&lt;h4 id="1-下载脚本"&gt;1. 下载脚本&lt;/h4&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;wget https://raw.githubusercontent.com/vbskycn/nezha_openwrt/main/nezha_openwrt.sh
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="2-添加执行权限"&gt;2. 添加执行权限&lt;/h4&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;chmod +x nezha_openwrt.sh
&lt;/code&gt;&lt;/pre&gt;&lt;h4 id="3-运行安装脚本"&gt;3. 运行安装脚本&lt;/h4&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;./nezha_openwrt.sh
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id="配置说明"&gt;配置说明&lt;/h2&gt;
&lt;p&gt;安装过程中需要配置以下参数：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;服务器地址：哪吒监控面板的地址&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;客户端密钥：在面板中生成的客户端密钥&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/vbskycn/nezha_openwrt/blob/main/assets/image-20250421141640256.png"&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2025/04/22/68077ea23e136.png"&gt;
 &lt;img class="mx-auto" alt="image-20250421141640256" src="https://img-cloud.zhoujie218.top/2025/04/22/68077ea23e136.png" /&gt;
 &lt;/a&gt;
 &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;复制安装地址后里面有一串密钥&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;TLS：是否启用TLS加密连接&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;GPU监控：是否启用GPU监控&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;温度监控：是否启用温度监控&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="使用说明"&gt;使用说明&lt;/h2&gt;
&lt;h3 id="服务管理"&gt;服务管理&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;启动服务：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;/etc/init.d/nezha-service start
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;停止服务：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;/etc/init.d/nezha-service stop
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;重启服务：&lt;/li&gt;
&lt;/ul&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;/etc/init.d/nezha-service restart
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="配置文件位置"&gt;配置文件位置&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;安装目录：&lt;code&gt;/etc/nezha&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;配置文件：&lt;code&gt;/etc/nezha/config.yml&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="常见问题"&gt;常见问题&lt;/h2&gt;
&lt;h3 id="1-安装失败"&gt;1. 安装失败&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;检查是否具有root权限&lt;/li&gt;
&lt;li&gt;检查网络连接是否正常&lt;/li&gt;
&lt;li&gt;检查系统架构是否支持&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="2-服务无法启动"&gt;2. 服务无法启动&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;检查配置文件是否正确&lt;/li&gt;
&lt;li&gt;检查服务器地址是否可以访问&lt;/li&gt;
&lt;li&gt;检查客户端密钥是否正确&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="3-监控数据不显示"&gt;3. 监控数据不显示&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;检查网络连接&lt;/li&gt;
&lt;li&gt;检查服务是否正常运行&lt;/li&gt;
&lt;li&gt;检查面板配置是否正确&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="注意事项"&gt;注意事项&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;安装前请确保系统有足够的存储空间&lt;/li&gt;
&lt;li&gt;建议在安装前备份重要数据&lt;/li&gt;
&lt;li&gt;确保网络环境稳定&lt;/li&gt;
&lt;li&gt;建议使用TLS加密连接以提高安全性&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="技术支持"&gt;技术支持&lt;/h2&gt;
&lt;p&gt;如有问题，请提交Issue或Pull Request：&lt;/p&gt;</description></item><item><title>openwrt二级路由开启IPV6</title><link>/archives/2645.html</link><pubDate>Fri, 20 Sep 2024 00:00:00 +0000</pubDate><guid>/archives/2645.html</guid><description>&lt;h1 id="openwrt二级路由开启ipv6"&gt;openwrt二级路由开启IPV6&lt;/h1&gt;
&lt;p&gt;有了公网IPV4，还想要ipv6,便研究了一下公网IPV6。网上大部分是将光猫改为桥接，然后路由拨号，获取公网IPV6地址，但目前不想这样做。研究一下，openwrt下二级路由下的IPV6获取。&lt;/p&gt;
&lt;p&gt;按照网上的说明，二级路由一般使用中继的方式获取，照猫画虎，试了一下&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/09/20/66ecf8c2a4387.png"&gt;
 &lt;img class="mx-auto" alt="image-20240920122325221" src="https://img-cloud.zhoujie218.top/2024/09/20/66ecf8c2a4387.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;h2 id="1首先wan6设置"&gt;1、首先wan6设置&lt;/h2&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f1a5015.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f1a5015.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f3e65ad.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f3e65ad.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;h2 id="2然后lan口设置"&gt;2、然后lan口设置&lt;/h2&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://i-blog.csdnimg.cn/blog_migrate/0c65d6c195af6b6f3d5f4f0daea32dd0.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://i-blog.csdnimg.cn/blog_migrate/0c65d6c195af6b6f3d5f4f0daea32dd0.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;全部中继模式&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f299a4c.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f299a4c.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;h2 id="3使用ttyd或ssh进入后台重要"&gt;3、使用TTYD或SSH进入后台(重要)&lt;/h2&gt;
&lt;p&gt;修改/etc/config/dhcp,增加以下内容&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/09/20/66ecf6bf9fedd.png"&gt;
 &lt;img class="mx-auto" alt="image-20240920121451712" src="https://img-cloud.zhoujie218.top/2024/09/20/66ecf6bf9fedd.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;config dhcp &amp;#39;wan&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ae81ff"&gt;option interface &amp;#39;wan&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ae81ff"&gt;option ignore &amp;#39;1&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ae81ff"&gt;option ra &amp;#39;relay&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ae81ff"&gt;option dhcpv6 &amp;#39;relay&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ae81ff"&gt;option ndp &amp;#39;relay&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#ae81ff"&gt;option master &amp;#39;1&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="4openwrt设备重启打开网络适配器信息正常可以看到ipv6了"&gt;4、openwrt设备重启，打开网络适配器信息，正常可以看到ipv6了&lt;/h2&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f1a517f.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f1a517f.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;可是打开ipv6 test网站，却无法测试通过，显示无ipv6地址，什么鬼？&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f5d4e0a.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f5d4e0a.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;一番尝试之下，发现将wan/wan6防火墙的入站改为接受，可以通过，肯定是防火墙拦截了。&lt;/p&gt;
&lt;p&gt;5、同样打开后台，在/etc/config/firewall中增加以下规则&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f68cc08.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f68cc08.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;好了，这下终于可以测过了&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f6f38e7.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f6f38e7.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;公网IP,公网IP，使用别的网络应该也可以ping通，遂打开手机4G网络，ping电脑获取到的ip,什么情况，ping不通？？&lt;/p&gt;
&lt;p&gt;又是防火墙的问题？？&lt;/p&gt;
&lt;p&gt;后台执行以下几条指令，把ip6tables全干掉&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code class="language-null" data-lang="null"&gt;ip6tables -P INPUT ACCEPTip6tables -P FORWARD ACCEPTip6tables -P OUTPUT ACCEPT
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;正常ping通&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f7eddfd.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/2024/09/20/66ecf5f7eddfd.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;</description></item><item><title>基于 OpenWrt 全网最简双线 IPTV 接入方案 - 自建iptv服务器</title><link>/archives/2639.html</link><pubDate>Mon, 12 Aug 2024 00:00:00 +0000</pubDate><guid>/archives/2639.html</guid><description>&lt;h2 id="介绍"&gt;介绍&lt;/h2&gt;
&lt;p&gt;该方案不需要拿到光猫管理员（虽然折腾半天拿到了发现可以不用），也不需要设置 VLAN，因为是双线接入只会多占用一个软路由端口，简单几步配置就能支持 IPTV。&lt;/p&gt;
&lt;h3 id="限制"&gt;限制&lt;/h3&gt;
&lt;p&gt;因为非常简单所以有一些限制：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;需要软路由上还有空闲的网口&lt;/li&gt;
&lt;li&gt;只在成都电信测试通过，不确定其它区域和运营商都可以。因为是发现本地 IPTV 是不需要拔号，也不需要特定 IP 的，和网上各种复杂教程完全不一样。&lt;/li&gt;
&lt;li&gt;本文完全通过无线访问，如果要使用机顶盒，需要再多一个端口桥接，或者 omcproxy 一类的工具，不在本文范围。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="拓扑情况"&gt;拓扑情况&lt;/h3&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/08/12/66b9947310631.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/2024/08/12/66b9947310631.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;简单介绍一下拓扑情况，光纤入户通过光猫再到安装 OpenWrt 的软路由，光猫使用桥接通过 OpenWrt 拔号上网（光猫使用路由模式直接拔号也没有影响）。光猫的上网口接入软路由的 WAN（eth0）口，IPTV 接入软路由的 eth1，后面会进行配置，还有一个 Wifi 作为 AP 让其它设备接入。&lt;/p&gt;
&lt;p&gt;影响本次的就是需要软件路由上有个空闲的网口，并接入光猫的 IPTV 口。否则需要单线复用的方式，获取光猫管理员创建 VLAN，共用软路由的 WAN 口，这种复杂的方式本文不会涉及。&lt;/p&gt;
&lt;p&gt;如果不符合上述条件的，可以退出本文搜索其它更合适的方式。&lt;/p&gt;
&lt;h2 id="操作步骤"&gt;操作步骤&lt;/h2&gt;
&lt;h3 id="释放网口"&gt;释放网口&lt;/h3&gt;
&lt;p&gt;在 &lt;code&gt;网络 -&amp;gt; 接口&lt;/code&gt; 中找到 &lt;code&gt;LAN&lt;/code&gt; 编辑，在物理设置里面把用于 IPTV 的物理端口 &lt;code&gt;eth1&lt;/code&gt;取消勾选。后面括号中应该是 &lt;code&gt;lan&lt;/code&gt;，因为是后面补截的屏所以这里已经是 &lt;code&gt;IPTV&lt;/code&gt; 。&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/08/12/66b994933f6b0.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/2024/08/12/66b994933f6b0.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;h3 id="新建-iptv-接口"&gt;新建 IPTV 接口&lt;/h3&gt;
&lt;p&gt;在 &lt;code&gt;网络 -&amp;gt; 接口&lt;/code&gt; 中创建新接口，命名 &lt;code&gt;IPTV&lt;/code&gt;（其它名字也可以方便记忆），协议选择&lt;code&gt;静态 IP&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;如图配置 IP 地址，不要和你当前路由同一网段就行，图中的 &lt;code&gt;192.168.168.123&lt;/code&gt; 是随便设置的一个 IP。&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/08/12/66b99497292b2.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/2024/08/12/66b99497292b2.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;</description></item><item><title>保证这是你见过的最详细的 OpenClash 图文教程</title><link>/archives/2637.html</link><pubDate>Sat, 03 Aug 2024 00:00:00 +0000</pubDate><guid>/archives/2637.html</guid><description>&lt;h1 id="介绍"&gt;介绍&lt;/h1&gt;
&lt;p&gt;保证这是你见过的最详细的 OpenClash 图文教程（本教程参靠网友Aethersailor配置教程）&lt;/p&gt;
&lt;h2 id="本教程所实现的效果"&gt;本教程所实现的效果&lt;/h2&gt;
&lt;p&gt;严格按照本教程的内容去设置你的 OpenClash 插件，加一个 Mosdns 即可实现以下功能：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;完美的 DNS 解析分流&lt;/strong&gt;,大陆域名使用运行商 DNS 或者你设置的 DNS 进行解析，国外域名使用节点服务器的 DNS 进行解析，取得理论上的最佳最快解析结果；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DNS 无污染，无泄漏&lt;/strong&gt;；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;丰富的分流规则&lt;/strong&gt;，具备大陆和国外分流功能，流媒体/ChatGPT 等服务均可以选择特定地区节点分流或者特定节点分流，可以搭配 OpenClash 的流媒体解锁探测功能使用；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;节点自动测速优选&lt;/strong&gt;；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;大陆域名和 IP 均会绕过 OpenClash 内核&lt;/strong&gt;，加快访问速度提升下载性能；&lt;/li&gt;
&lt;li&gt;在宽带拥有 IPv6 以及机场支持 IPv6 出站的情况下，&lt;strong&gt;实现 OpenClash 和 IPv6 的完美兼容&lt;/strong&gt;；&lt;/li&gt;
&lt;li&gt;每日自动更新上游规则碎片，一次设置，长期无人值守，不用折腾。即使 OpenClash 出现问题未能启动，也不影响正常上网。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;分流非常精确&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/08/03/66adcebb29c7e.png"&gt;
 &lt;img class="mx-auto" alt="image-20240803143122558" src="https://img-cloud.zhoujie218.top/2024/08/03/66adcebb29c7e.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;h3 id="关于-ipv6"&gt;关于 IPv6&lt;/h3&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果是爱快+OP会泄漏dns，我目前没有搞定，openwrt做主路由可以按下面的教程&lt;/p&gt;
&lt;p&gt;在确保你的节点支持 IPv6 出站的情况下，搭配下面的教程实现 OpenClash 和 IPv6 的完美兼容 &lt;a href="https://github.com/Aethersailor/Custom_OpenClash_Rules/wiki/OpenWrt-IPv6-%E8%AE%BE%E7%BD%AE%E6%95%99%E7%A8%8B"&gt;https://github.com/Aethersailor/Custom_OpenClash_Rules/wiki/OpenWrt-IPv6-设置教程&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;不清楚自己的节点是否支持 IPv6 的话，可以向机场客服发工单来确定，或者按照教程内容进行设置后测试节点如果不具备 IPv6 出站能力再关闭 OpenClash 的 IPv6 功能&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;h3 id="关于-dns"&gt;关于 DNS&lt;/h3&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;强烈建议使用运营商通告的 DNS，不论是解析速度还是结果的科学性，都不是第三方 DNS 可以比拟的&lt;/p&gt;</description></item><item><title>最简单的openwrt磁盘扩容</title><link>/archives/2589.html</link><pubDate>Sun, 07 Jan 2024 00:00:00 +0000</pubDate><guid>/archives/2589.html</guid><description>&lt;h2 id="最简单的openwrt磁盘扩容"&gt;最简单的openwrt磁盘扩容&lt;/h2&gt;
&lt;p&gt;pve里面新加一个磁盘，扩大分区操作也差不多&lt;/p&gt;
&lt;p&gt;加盘有个好处，升级固件后只要在挂载一次分区，设置数据什么都不丢&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;格式化这个磁盘&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;mkfs.ext4 /dev/sdb
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;创建挂载点：&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;mkdir /mnt/sdb
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;挂载/dev/sdb到新的挂载点：&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;mount /dev/sdb /mnt/sdb
&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;复制数据到新盘(/dev/sdb)：&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;cp -a /overlay/. /mnt/sdb/
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;卸载旧overlay：&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;umount /overlay
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;将新盘(/dev/sdb)挂载到overlay：&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;mount --bind /mnt/sdb /overlay
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;也可以在网页端挂载到overlay&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/03/12/65efe9a181990.webp"&gt;
 &lt;img class="mx-auto" alt="image-20240107165402051" src="https://img-cloud.zhoujie218.top/2024/03/12/65efe9a181990.webp" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;抄作业&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/03/12/65efe9a1a35b7.webp"&gt;
 &lt;img class="mx-auto" alt="image-20240107165437066" src="https://img-cloud.zhoujie218.top/2024/03/12/65efe9a1a35b7.webp" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;保存重启&lt;/p&gt;
&lt;p&gt;查看效果： &lt;code&gt;df -h&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/01/07/659a67121bf50.webp"&gt;
 &lt;img class="mx-auto" alt="image-20240107165540385" src="https://img-cloud.zhoujie218.top/2024/01/07/659a67121bf50.webp" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2024/03/12/65efe9a0a374d.webp"&gt;
 &lt;img class="mx-auto" alt="image-20240107165709098" src="https://img-cloud.zhoujie218.top/2024/03/12/65efe9a0a374d.webp" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;再也不用焦虑了&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id="升级系统"&gt;升级系统：&lt;/h2&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;#先新建挂载点
mkdir /mnt/sdb
# 再挂载
mount /dev/sdb /mnt/sdb
# 拷贝文件
cp -r /overlay/* /mnt/sdb
# 卸载挂点
umount /mnt/sdb

#拷贝完成后手动挂载到/overlay下
mount /dev/sdb /overlay
/etc/init.d/fstab reload
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id="开机自动挂载"&gt;开机自动挂载&lt;/h3&gt;
&lt;p&gt;这时候应该就挂载成功了，下一步制作开机脚本，开机后自动挂载：&lt;/p&gt;
&lt;p&gt;编辑文件：&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;vim /etc/rc.local
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;在exit0上面加上如下代码：&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;mount /dev/sdb /overlay
/etc/init.d/fstab reload
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;保存退出，重启即可。&lt;/p&gt;</description></item><item><title>老旧设备利用打印机服务实现网络打印,并实现打印机热插拔</title><link>/archives/2508.html</link><pubDate>Fri, 14 Oct 2022 00:00:00 +0000</pubDate><guid>/archives/2508.html</guid><description>&lt;p&gt;&lt;strong&gt;先决条件：能安装openwrt&lt;/strong&gt; 利用 OpenWrt 在局域网下共享打印机，主要需要以下两个插件&lt;/p&gt;
&lt;h2 id="p910nd打印机服务器"&gt;p910nd打印机服务器&lt;/h2&gt;
&lt;p&gt;sane扫描仪服务及配套的xinetd控制接口 接下来分别介绍两个插件的安装及配置流程&lt;/p&gt;
&lt;p&gt;安装插件 p910nd&lt;/p&gt;
&lt;p&gt;&lt;code&gt;opkg update opkg install kmod-usb-printer p910nd luci-app-p910nd luci-i18n-p910nd-zh-cn&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;连接打印机 将打印机连接到路由器 USB 接口，输入指令&lt;/p&gt;
&lt;p&gt;ssh登入进去 &lt;code&gt;**ls /dev/usb**&lt;/code&gt; 看到lp0设备，就说明 openwrt检测到了打印&lt;/p&gt;
&lt;h2 id="开始使用"&gt;开始使用&lt;/h2&gt;
&lt;p&gt;在 LUCI 界面配置打印机 找到 服务-打印服务器，勾选启动。&lt;/p&gt;
&lt;p&gt;设备填上刚才看到的/dev/usb/lp0(需要选择下来出来的MX390 series FAX)，接口选择未指定即可，端口通常为9100。&lt;/p&gt;
&lt;p&gt;打开putty，登录路由器，输入命令netstat –an，查看当前路由器连接，查询9100的端口是否已经有在监听和使用中，和对应的IP地址是否正确。&lt;/p&gt;
&lt;p&gt;注意如果 OpenWrt 9100端口并没有如下图打开。&lt;/p&gt;
&lt;p&gt;SSH，键入/etc/init.d/p910nd enable，然后重启（必须重启才会生效）。再进入ssh，键入netstat –an，SSH，键入/etc/init.d/p910nd enable，然后重启。再进入ssh，键入netstat –an，&lt;/p&gt;
&lt;p&gt;windows,手机，mac等设备添加打印机就和添加正常网络打印机相同，不再重复&lt;/p&gt;
&lt;h2 id="实现打印机的热插拔"&gt;&lt;a href="https://oldwiki.archive.openwrt.org/doc/howto/p910nd.server"&gt;实现打印机的热插拔&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;在openwrt &amp;ldquo;/etc/hotplug.d/usbmisc/20-p910nd&amp;rdquo; 这个路经下面添加如下代码就可以了&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-basic" data-lang="basic"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;echo &lt;span style="color:#e6db74"&gt;&amp;#34;`date`: HP LaserJet P1108 added&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span style="color:#f92672"&gt;/&lt;/span&gt;tmp&lt;span style="color:#f92672"&gt;/&lt;/span&gt;hp&lt;span style="color:#ae81ff"&gt;-1108&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;/&lt;/span&gt;etc&lt;span style="color:#f92672"&gt;/&lt;/span&gt;rc&lt;span style="color:#f92672"&gt;.&lt;/span&gt;d&lt;span style="color:#f92672"&gt;/&lt;/span&gt;S99p910nd restart
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;网件wndr4300路由器，HP p1108 打印机示例&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/wp-content/uploads/2022/10/20221014061423216.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/wp-content/uploads/2022/10/20221014061423216.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;这样即可在打开打印机时自动启动openwrt上面的打印服务&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id="每天早上重启一次打印服务"&gt;每天早上重启一次打印服务&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-basic" data-lang="basic"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;30 &lt;span style="color:#ae81ff"&gt;6&lt;/span&gt; &lt;span style="color:#f92672"&gt;*&lt;/span&gt; &lt;span style="color:#f92672"&gt;*&lt;/span&gt; &lt;span style="color:#f92672"&gt;*&lt;/span&gt; &lt;span style="color:#f92672"&gt;/&lt;/span&gt;etc&lt;span style="color:#f92672"&gt;/&lt;/span&gt;rc&lt;span style="color:#f92672"&gt;.&lt;/span&gt;d&lt;span style="color:#f92672"&gt;/&lt;/span&gt;S99p910nd restart
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description></item><item><title>Frp内网穿透实现 以服务器CentOS+客户端OpenWrt为例</title><link>/archives/2436.html</link><pubDate>Fri, 01 Jul 2022 00:00:00 +0000</pubDate><guid>/archives/2436.html</guid><description>&lt;p&gt;要想将自己提供的服务发布到Internet，需要公网IP地址。由于IPv4地址资源紧张，家庭宽带获取IPv4公网地址难度大、代价高。采用内网穿透技术，可通过拥有公网IPv4地址的服务器来访问内网资源。&lt;/p&gt;
&lt;p&gt;　　内网穿透可以采用花生壳等软件实现，也可自行搭建服务器完成。本文在CentOS（服务器）+ OpenWrt（客户端）的结构下，介绍利用Frp实现内网穿透的方法。&lt;/p&gt;
&lt;p&gt;　　【注意】Frp分为服务器端和客户端，服务器端名为：frps，客户端名为frpc。安装时务必注意区分。&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/wp-content/uploads/2022/07/20220701041650268.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/wp-content/uploads/2022/07/20220701041650268.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;一、资源获取&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Frp项目地址 &lt;a href="https://github.com/fatedier/frp"&gt;https://github.com/fatedier/frp&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Frp发行安装包 &lt;a href="https://github.com/fatedier/frp/releases"&gt;https://github.com/fatedier/frp/releases&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Frp文档 &lt;a href="https://gofrp.org/docs/"&gt;https://gofrp.org/docs/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;二、CentOS服务器配置&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Frps安装包获取 1）前往 1.2 中的发行安装包地址，寻找适合您的安装包。如x86平台64位的linux机器，应该使用名为 frp_x.xx.x_linux_amd64.tar.gz 的安装包（x.xx.x为版本号）。选中安装包名称，右键复制链接地址。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;2）前往服务器执行下列命令，将安装包下载到服务器CentOS系统中。&lt;/p&gt;
&lt;p&gt;wget &lt;a href="https://github.com/fatedier/frp/releases/download/v0.32.1/frp_0.32.1_linux_amd64.tar.gz"&gt;https://github.com/fatedier/frp/releases/download/v0.32.1/frp_0.32.1_linux_amd64.tar.gz&lt;/a&gt; 3）执行下列命令，解压安装包。&lt;/p&gt;
&lt;p&gt;tar -xvf frp_0.32.1_linux_amd64.tar.gz&lt;/p&gt;
&lt;ol start="2"&gt;
&lt;li&gt;Frps安装 1）执行下列命令，为Frps程序新建一个目录。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;mkdir /etc/frps 2）将解压的Frp文件复制到Frps程序目录内。&lt;/p&gt;
&lt;p&gt;mv frp_0.32.1_linux_amd64/* /etc/frps/&lt;/p&gt;
&lt;ol start="3"&gt;
&lt;li&gt;注册系统服务 1）新建Frps服务文件&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;vim /usr/lib/systemd/system/frps.service 2）按键盘 i 键，进入编辑状态。写入如下代码（也可直接按鼠标右键粘贴）。然后按 ESC 按键，输入 :wq 回车后保存并退出。&lt;/p&gt;
&lt;p&gt;[Unit] Description=The nginx HTTP and reverse proxy server After=network.target remote-fs.target nss-lookup.target&lt;/p&gt;
&lt;p&gt;[Service] Type=simple ExecStart=/etc/frps/frps -c /etc/frps/frps.ini KillSignal=SIGQUIT TimeoutStopSec=5 KillMode=process PrivateTmp=true StandardOutput=syslog StandardError=inherit&lt;/p&gt;
&lt;p&gt;[Install] WantedBy=multi-user.target 3）重载配置文件&lt;/p&gt;
&lt;p&gt;systemctl daemon-reload 4）启动服务&lt;/p&gt;</description></item><item><title>网件wndr3800带usb打印服务器固件</title><link>/archives/2432.html</link><pubDate>Wed, 29 Jun 2022 00:00:00 +0000</pubDate><guid>/archives/2432.html</guid><description>&lt;p&gt;&lt;strong&gt;在家里翻出个老古董 ，网件wndr3800,上面有usb接口&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;发挥余热&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;接上我的老打印机 hp p1108&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;华丽变身，网络打印机，手机无线打印，远程打印&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;网件wndr3800可能太老了，网上找了好多天，都没有找到带usb打印服务器的固件&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;自己动手，丰衣足食&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;型号&lt;/th&gt;
 &lt;th&gt;Netgear WNDR3800CH&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;架构&lt;/td&gt;
 &lt;td&gt;Atheros AR7161 rev 2&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;目标平台&lt;/td&gt;
 &lt;td&gt;ath79/generic&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;固件版本&lt;/td&gt;
 &lt;td&gt;OpenWrt 21.02-SNAPSHOT / LuCI 21.02 Lienol git-1ff9cf7&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;内核版本&lt;/td&gt;
 &lt;td&gt;5.4.194&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/piggo/202206291621690.png"&gt;
 &lt;img class="mx-auto" alt="image-20220629162033935" src="https://img-cloud.zhoujie218.top/piggo/202206291621690.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/piggo/202206291621414.png"&gt;
 &lt;img class="mx-auto" alt="image-20220629162101757" src="https://img-cloud.zhoujie218.top/piggo/202206291621414.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;需要的朋友自取，刷砖了别怪我哈，只自用&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下载:&lt;a href="https://zbds.lanzoul.com/iyZPU073wfad"&gt;https://zbds.lanzoul.com/iyZPU073wfad&lt;/a&gt; 密码:6xzp&lt;/p&gt;</description></item><item><title>openwrt用dd命令写盘,用命令修改IP</title><link>/archives/1776.html</link><pubDate>Sat, 11 Jul 2020 00:00:00 +0000</pubDate><guid>/archives/1776.html</guid><description>&lt;p&gt;此教程适合openwrt不同固件之间的刷机&lt;/p&gt;
&lt;p&gt;首先把下载openwrt固件改名称为op.img（提前把固件改个名字）&lt;/p&gt;
&lt;p&gt;一、登陆OPENWRT网页后台进到系统里面点文件传输再点选择文件找到你改过名的固件再点上传【其实就是将img文件上传到’&lt;em&gt;/tmp/upload/&lt;/em&gt;‘文件夹，你也可以用其他方式上传】 二、这里等他上传完了就好了 [caption id=&amp;ldquo;attachment_1780&amp;rdquo; align=&amp;ldquo;alignnone&amp;rdquo; width=&amp;ldquo;554&amp;rdquo;]&lt;a href="https://img-cloud.zhoujie218.top/wp-content/uploads/2020/07/unnamed-file-34.png"&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/wp-content/uploads/2020/07/unnamed-file-34.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/wp-content/uploads/2020/07/unnamed-file-34.png" /&gt;
 &lt;/a&gt;
 &lt;/a&gt; [/caption] 三、SSH登陆路由，我用的是putty软件 [caption id=&amp;ldquo;attachment_1781&amp;rdquo; align=&amp;ldquo;alignnone&amp;rdquo; width=&amp;ldquo;467&amp;rdquo;]&lt;a href="https://img-cloud.zhoujie218.top/wp-content/uploads/2020/07/unnamed-file-35.png"&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/wp-content/uploads/2020/07/unnamed-file-35.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/wp-content/uploads/2020/07/unnamed-file-35.png" /&gt;
 &lt;/a&gt;
 &lt;/a&gt; [/caption] 四．输入你登陆路由器用户名和密码 Openwrt用户名root密码就是你登陆路由器密码【注意密码这里输入是看不到的】然后回车 输入命令 &lt;em&gt;ls /tmp/upload&lt;/em&gt; 回车查看你刚刚上传的固件我这里看到的就是op.img就表示上传成功了 五、开始写盘 输入命令 dd if=/tmp/upload/op.img of=/dev/sda 回车（op.img为固件的名称） 然后是等待刷写，然后出现下面这两排字母表示刷机成功了 1087522+0 records in 1087522+0 records out 然后输入reboot重启路由器就是你全新的固件了和全新写盘一样效果 [caption id=&amp;ldquo;attachment_1782&amp;rdquo; align=&amp;ldquo;alignnone&amp;rdquo; width=&amp;ldquo;554&amp;rdquo;]&lt;a href="https://img-cloud.zhoujie218.top/wp-content/uploads/2020/07/unnamed-file-36.png"&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/wp-content/uploads/2020/07/unnamed-file-36.png"&gt;
 &lt;img class="mx-auto" alt="" src="https://img-cloud.zhoujie218.top/wp-content/uploads/2020/07/unnamed-file-36.png" /&gt;
 &lt;/a&gt;
 &lt;/a&gt; [/caption]&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;vi /etc/config/network/  直接修改IP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ifconfig  接口  IP  临时修改IP&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;homelede固件默认IP 192.168.1.1如需要修改 首先，固件启动后，按回车进入命令窗口： 默认用户名root，密码password 在命令行输入： uci set network.lan.ipaddr=&amp;lsquo;192.168.5.1&amp;rsquo; uci commit network uci delete dhcp.lan.dhcp_option uci add_list dhcp.lan.dhcp_option=&amp;lsquo;6,192.168.5.1&amp;rsquo; uci commit network 以上192.168.5.1替换成你想改的IP&lt;/p&gt;</description></item><item><title>使用 GitHub Actions 云编译 OpenWrt</title><link>/archives/1356.html</link><pubDate>Thu, 05 Mar 2020 00:00:00 +0000</pubDate><guid>/archives/1356.html</guid><description>&lt;h2 id="前言"&gt;前言&lt;/h2&gt;
&lt;p&gt;Github Ac­tions 是 GitHub 推出的持续集成 (Con­tin­u­ous in­te­gra­tion，简称 CI) 服务，它提供了配置非常不错的虚拟服务器环境（E5 2vCPU/​7G RAM），基于它可以进行构建、测试、打包、部署项目。对于公共仓库可免费无时间限制的使用（指累积时间），不过要使用它首先需要知道如何编写 workflow 文件。但这篇文章并不是教你如何枯燥的去编写 work­flow 文件，而是教你如何去使用博主已经编写好的 Open­Wrt 编译方案。&lt;/p&gt;
&lt;h2 id="教程更新"&gt;教程更新&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;2020-02-01 新图文教程&lt;/li&gt;
&lt;li&gt;2019-12-10 新增 &lt;strong&gt;macOS 编译方案&lt;/strong&gt;使用说明&lt;/li&gt;
&lt;li&gt;2019-12-06 添加 tmate 网页终端链接说明&lt;/li&gt;
&lt;li&gt;2019-12-05 优化基础使用教程，添加 @lietxia 大佬的图文教程链接&lt;/li&gt;
&lt;li&gt;2019-12-04 新增&lt;strong&gt;云menuconfig&lt;/strong&gt;使用方法&lt;/li&gt;
&lt;li&gt;2019-12-03 新增&lt;strong&gt;并发编译&lt;/strong&gt;使用方法&lt;/li&gt;
&lt;li&gt;2019-11-30 新增&lt;strong&gt;自定义源码编译&lt;/strong&gt;使用方法&lt;/li&gt;
&lt;li&gt;2019-11-14 全网独家首发&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="方案特点"&gt;方案特点&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;免费&lt;/li&gt;
&lt;li&gt;一键快速编译&lt;/li&gt;
&lt;li&gt;定时自动编译&lt;/li&gt;
&lt;li&gt;客制化编译&lt;/li&gt;
&lt;li&gt;并发编译（可同时进行20+5个编译任务）&lt;/li&gt;
&lt;li&gt;无需搭建编译环境（在线&lt;code&gt;make menuconfig&lt;/code&gt;生成配置文件)&lt;/li&gt;
&lt;li&gt;无需消耗自己的计算机与服务器的计算资源（性感E5在线编译）&lt;/li&gt;
&lt;li&gt;无需担心磁盘空间不足（近60G磁盘空间）&lt;/li&gt;
&lt;li&gt;无需使用清理文件（内核更新不怕 boom ）&lt;/li&gt;
&lt;li&gt;编译速度快（编译时间1-2小时）&lt;/li&gt;
&lt;li&gt;编译成功率提升200%（万兆自由网络环境）&lt;/li&gt;
&lt;li&gt;全新环境（杜绝编译环境不干净导致编译失败）&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;本解决方案是一个开放平台，任何人都可以基于此打造自己专属的编译方案。&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2 id="项目地址"&gt;项目地址&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://github.com/P3TERX/Actions-OpenWrt"&gt;&lt;/a&gt;&lt;a href="https://github.com/P3TERX/Actions-OpenWrt"&gt;https://github.com/P3TERX/Actions-OpenWrt&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;支持项目请随手点个 &lt;code&gt;star&lt;/code&gt;，让更多的人发现、使用并受益。&lt;/p&gt;
&lt;h2 id="准备工作"&gt;准备工作&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;注册 GitHub 账号&lt;/li&gt;
&lt;li&gt;搭建编译环境，用于生成&lt;code&gt;.config&lt;/code&gt;文件。(可选)&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;TIPS:&lt;/strong&gt; 关于编译环境的搭建，推荐去看我之前写的相关文章，Win­dows 10 可以使用 WSL ，ma­cOS、Linux 可以使用 Docker 。&lt;/p&gt;</description></item><item><title>openwrt 禁局域网内设备访问外网</title><link>/archives/988.html</link><pubDate>Mon, 25 Nov 2019 00:00:00 +0000</pubDate><guid>/archives/988.html</guid><description>&lt;h1 id="this-file-is-interpreted-as-shell-script"&gt;This file is interpreted as shell script.&lt;/h1&gt;
&lt;h1 id="put-your-custom-iptables-rules-here-they-will"&gt;Put your custom iptables rules here, they will&lt;/h1&gt;
&lt;h1 id="be-executed-with-each-firewall-re-start"&gt;be executed with each firewall (re-)start.&lt;/h1&gt;
&lt;h1 id="internal-uci-firewall-chains-are-flushed-and-recreated-on-reload-so"&gt;Internal uci firewall chains are flushed and recreated on reload, so&lt;/h1&gt;
&lt;h1 id="put-custom-rules-into-the-root-chains-eg-input-or-forward-or-into-the"&gt;put custom rules into the root chains e.g. INPUT or FORWARD or into the&lt;/h1&gt;
&lt;h1 id="special-user-chains-eg-input_wan_rule-or-postrouting_lan_rule"&gt;special user chains, e.g. input_wan_rule or postrouting_lan_rule.&lt;/h1&gt;
&lt;p&gt;iptables -t nat -A PREROUTING -p udp &amp;ndash;dport 53 -j REDIRECT &amp;ndash;to-ports 53 iptables -t nat -A PREROUTING -p tcp &amp;ndash;dport 53 -j REDIRECT &amp;ndash;to-ports 53 iptables -I FORWARD -m mac &amp;ndash;mac-source c4:9f:4c:10:54:9b -j DROP iptables -I FORWARD -m mac &amp;ndash;mac-source 20:39:56:5c:f4:57 -j DROP iptables -I FORWARD -m mac &amp;ndash;mac-source 60:21:01:9f:0d:83 -j DROP iptables -I FORWARD -m mac &amp;ndash;mac-source 14:bd:61:cc:aa:4c -j DROP iptables -I FORWARD -m mac &amp;ndash;mac-source 7c:76:68:e0:98:4c -j DROP iptables -I FORWARD -m mac &amp;ndash;mac-source 3c:b6:b7:f6:f7:d7 -j DROP iptables -I FORWARD -m mac &amp;ndash;mac-source 1c:40:e8:11:a1:10 -j DROP&lt;/p&gt;</description></item></channel></rss>