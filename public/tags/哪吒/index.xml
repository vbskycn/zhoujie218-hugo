<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>哪吒 on 周杰个人博客</title><link>/tags/%E5%93%AA%E5%90%92/</link><description>Recent content in 哪吒 on 周杰个人博客</description><generator>Hugo</generator><language>zh-CN</language><lastBuildDate>Tue, 29 Apr 2025 00:00:00 +0000</lastBuildDate><atom:link href="/tags/%E5%93%AA%E5%90%92/index.xml" rel="self" type="application/rss+xml"/><item><title>(原创)哪吒监控流量告警规则公告配置规则配置工具</title><link>/archives/2668.html</link><pubDate>Tue, 29 Apr 2025 00:00:00 +0000</pubDate><guid>/archives/2668.html</guid><description>&lt;h1 id="哪吒监控配置工具使用指南"&gt;哪吒监控配置工具使用指南&lt;/h1&gt;
&lt;h2 id="简介"&gt;简介&lt;/h2&gt;
&lt;p&gt;哪吒监控配置工具是一个专为哪吒监控系统设计的Web配置生成工具，它能够帮助用户快速生成标准的JSON配置文件。该工具提供了两个主要功能：流量告警规则生成器和公告配置生成器，让配置过程变得更加简单和直观。&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2025/04/29/68104995e1c15.png"&gt;
 &lt;img class="mx-auto" alt="image-20250429113650041" src="https://img-cloud.zhoujie218.top/2025/04/29/68104995e1c15.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;h2 id="工具概述"&gt;工具概述&lt;/h2&gt;
&lt;p&gt;哪吒监控配置工具基于Web技术构建，具有以下特点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;响应式设计，支持各种设备访问&lt;/li&gt;
&lt;li&gt;直观的用户界面&lt;/li&gt;
&lt;li&gt;实时配置预览&lt;/li&gt;
&lt;li&gt;一键复制生成的配置&lt;/li&gt;
&lt;li&gt;支持多规则配置&lt;/li&gt;
&lt;li&gt;自动格式化和验证&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="功能详解"&gt;功能详解&lt;/h2&gt;
&lt;h3 id="流量告警规则生成器"&gt;流量告警规则生成器&lt;/h3&gt;
&lt;p&gt;流量告警规则生成器允许用户设置服务器流量监控规则，主要功能包括：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;监控范围设置&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;可选择监控所有服务器&lt;/li&gt;
&lt;li&gt;可指定特定服务器进行监控&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;流量类型配置&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;周期入站流量&lt;/li&gt;
&lt;li&gt;周期出站流量&lt;/li&gt;
&lt;li&gt;周期总流量&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;流量限制设置&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;支持多种单位：KB、MB、GB、TB&lt;/li&gt;
&lt;li&gt;可设置具体的流量上限值&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;告警周期配置&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;支持多种时间单位：小时、天、周、月、年&lt;/li&gt;
&lt;li&gt;可设置周期开始时间&lt;/li&gt;
&lt;li&gt;可配置周期间隔&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2025/04/29/681049918c6f6.png"&gt;
 &lt;img class="mx-auto" alt="image-20250429113715817" src="https://img-cloud.zhoujie218.top/2025/04/29/681049918c6f6.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;h3 id="公告配置生成器"&gt;公告配置生成器&lt;/h3&gt;
&lt;p&gt;公告配置生成器用于生成服务器公告相关的配置，包含以下功能：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;账单信息配置&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;开始日期和结束日期设置&lt;/li&gt;
&lt;li&gt;自动续费选项&lt;/li&gt;
&lt;li&gt;计费周期选择（月付/季付/年付）&lt;/li&gt;
&lt;li&gt;金额设置&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;网络配置&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;带宽设置（Mbps）&lt;/li&gt;
&lt;li&gt;流量配置（TB/每月）&lt;/li&gt;
&lt;li&gt;流量类型选择（入站/出站/总流量）&lt;/li&gt;
&lt;li&gt;IPv4/IPv6数量配置&lt;/li&gt;
&lt;li&gt;网络线路说明&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2025/04/29/6810499069ee9.png"&gt;
 &lt;img class="mx-auto" alt="image-20250429113744149" src="https://img-cloud.zhoujie218.top/2025/04/29/6810499069ee9.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;h2 id="使用指南"&gt;使用指南&lt;/h2&gt;
&lt;h3 id="流量告警规则生成器使用步骤"&gt;流量告警规则生成器使用步骤&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;访问工具首页，点击&amp;quot;流量告警规则生成器&amp;quot;&lt;/li&gt;
&lt;li&gt;配置监控范围
&lt;ul&gt;
&lt;li&gt;选择是否监控所有服务器&lt;/li&gt;
&lt;li&gt;如果选择指定服务器，输入服务器ID（多个ID用逗号分隔）&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;设置流量类型和限制
&lt;ul&gt;
&lt;li&gt;选择需要监控的流量类型&lt;/li&gt;
&lt;li&gt;输入流量上限值&lt;/li&gt;
&lt;li&gt;选择适当的单位&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;配置告警周期
&lt;ul&gt;
&lt;li&gt;设置周期开始时间&lt;/li&gt;
&lt;li&gt;选择周期间隔和单位&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;点击&amp;quot;生成配置&amp;quot;按钮&lt;/li&gt;
&lt;li&gt;复制生成的JSON配置&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="公告配置生成器使用步骤"&gt;公告配置生成器使用步骤&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;访问工具首页，点击&amp;quot;公告配置生成器&amp;quot;&lt;/li&gt;
&lt;li&gt;填写账单信息
&lt;ul&gt;
&lt;li&gt;设置开始和结束日期&lt;/li&gt;
&lt;li&gt;选择是否自动续费&lt;/li&gt;
&lt;li&gt;选择计费周期&lt;/li&gt;
&lt;li&gt;输入金额&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;配置网络参数
&lt;ul&gt;
&lt;li&gt;设置带宽和流量&lt;/li&gt;
&lt;li&gt;选择流量类型&lt;/li&gt;
&lt;li&gt;配置IP地址数量&lt;/li&gt;
&lt;li&gt;填写网络线路信息&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;添加额外说明（可选）&lt;/li&gt;
&lt;li&gt;点击&amp;quot;生成配置&amp;quot;按钮&lt;/li&gt;
&lt;li&gt;复制生成的JSON配置&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="最佳实践"&gt;最佳实践&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;流量告警规则配置建议&lt;/p&gt;</description></item><item><title>哪吒监控面板数据库损坏修复教程,原创</title><link>/archives/2667.html</link><pubDate>Mon, 28 Apr 2025 00:00:00 +0000</pubDate><guid>/archives/2667.html</guid><description>&lt;h1 id="哪吒监控面板数据库损坏修复教程"&gt;哪吒监控面板数据库损坏修复教程&lt;/h1&gt;
&lt;h2 id="问题描述"&gt;问题描述&lt;/h2&gt;
&lt;p&gt;在使用哪吒监控面板时，可能会遇到以下错误：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;删除服务时提示 &amp;ldquo;database disk image is malformed&amp;rdquo;&lt;/li&gt;
&lt;li&gt;数据库操作失败&lt;/li&gt;
&lt;li&gt;面板功能异常&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="原因分析"&gt;原因分析&lt;/h2&gt;
&lt;p&gt;数据库损坏可能由以下原因导致：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;服务器突然断电或强制关机&lt;/li&gt;
&lt;li&gt;磁盘空间不足&lt;/li&gt;
&lt;li&gt;数据库文件权限问题&lt;/li&gt;
&lt;li&gt;系统异常导致数据库写入中断&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="解决方案"&gt;解决方案&lt;/h2&gt;
&lt;h3 id="步骤一停止服务"&gt;步骤一：停止服务&lt;/h3&gt;
&lt;p&gt;首先需要停止哪吒面板服务，以防止在修复过程中产生新的数据写入：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;systemctl stop nezha-dashboard
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="步骤二备份数据库"&gt;步骤二：备份数据库&lt;/h3&gt;
&lt;p&gt;在进行任何操作之前，务必先备份当前数据库文件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cp /opt/nezha/dashboard/data/sqlite.db /opt/nezha/dashboard/data/sqlite.db.bak
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="步骤三修复数据库"&gt;步骤三：修复数据库&lt;/h3&gt;
&lt;p&gt;使用 SQLite 的恢复命令修复数据库：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sqlite3 /opt/nezha/dashboard/data/sqlite.db &lt;span style="color:#e6db74"&gt;&amp;#34;.recover&amp;#34;&lt;/span&gt; | sqlite3 /opt/nezha/dashboard/data/sqlite.db.new
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/2025/04/28/680f43ae62718.png"&gt;
 &lt;img class="mx-auto" alt="image-20250428170017456" src="https://img-cloud.zhoujie218.top/2025/04/28/680f43ae62718.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;h3 id="步骤四替换数据库文件"&gt;步骤四：替换数据库文件&lt;/h3&gt;
&lt;p&gt;将修复后的数据库文件替换原文件：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mv /opt/nezha/dashboard/data/sqlite.db.new /opt/nezha/dashboard/data/sqlite.db
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="步骤五重启服务"&gt;步骤五：重启服务&lt;/h3&gt;
&lt;p&gt;修复完成后，重启哪吒面板服务：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;systemctl start nezha-dashboard
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="预防措施"&gt;预防措施&lt;/h2&gt;
&lt;p&gt;为了避免数据库损坏，建议采取以下预防措施：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;定期备份&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;设置定时任务，定期备份数据库文件&lt;/li&gt;
&lt;li&gt;建议每周至少备份一次&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;系统维护&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;确保服务器有足够的磁盘空间&lt;/li&gt;
&lt;li&gt;定期检查系统日志&lt;/li&gt;
&lt;li&gt;使用正常关机流程&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;权限管理&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;确保数据库文件权限正确&lt;/li&gt;
&lt;li&gt;定期检查文件所有权&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="注意事项"&gt;注意事项&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;在执行修复操作前，一定要先备份数据库文件&lt;/li&gt;
&lt;li&gt;修复过程中不要中断操作&lt;/li&gt;
&lt;li&gt;如果修复后仍然无法解决问题，可能需要重新安装面板&lt;/li&gt;
&lt;li&gt;建议在服务器负载较低时进行修复操作&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="常见问题"&gt;常见问题&lt;/h2&gt;
&lt;h3 id="q-修复后数据会丢失吗"&gt;Q: 修复后数据会丢失吗？&lt;/h3&gt;
&lt;p&gt;A: 如果数据库损坏不严重，修复后数据通常可以保留。但建议 always 先备份。&lt;/p&gt;</description></item></channel></rss>