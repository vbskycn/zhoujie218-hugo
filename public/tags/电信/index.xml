<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>电信 on 周杰个人博客</title><link>/tags/%E7%94%B5%E4%BF%A1/</link><description>Recent content in 电信 on 周杰个人博客</description><generator>Hugo</generator><language>zh-CN</language><lastBuildDate>Thu, 22 Aug 2019 00:00:00 +0000</lastBuildDate><atom:link href="/tags/%E7%94%B5%E4%BF%A1/index.xml" rel="self" type="application/rss+xml"/><item><title>电信IPTV直播源抓取</title><link>/archives/729.html</link><pubDate>Thu, 22 Aug 2019 00:00:00 +0000</pubDate><guid>/archives/729.html</guid><description>&lt;p&gt;1.环境准备 电信IPTV机顶盒 支持openwrt的路由器 或者爱快 Wireshark&lt;/p&gt;
&lt;p&gt;2.抓取步骤 将电信IPTV盒子连接到路由器的LAN口&lt;/p&gt;
&lt;p&gt;配置盒子，使盒子处于观看电视频道状态待用&lt;/p&gt;
&lt;p&gt;获取电信盒子IP（本次抓取ip为192.168.1.126）&lt;/p&gt;
&lt;p&gt;ssh登录路由器执行命令&lt;/p&gt;
&lt;p&gt;1, 安装支持库（openwrt）&lt;/p&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;opkg update
opkg install libpcap
opkg install tcpdump
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/wp-content/uploads/2019/08/11.png"&gt;
 &lt;img class="mx-auto" alt="https://img-cloud.zhoujie218.top/wp-content/uploads/2019/08/11.png" src="https://img-cloud.zhoujie218.top/wp-content/uploads/2019/08/11.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;h1 id="进入u盘挂载目录根据实际情况选择也可以不用u盘路由本身空间够的话20m左右用路由本身的空间"&gt;进入u盘挂载目录，根据实际情况选择,也可以不用U盘，路由本身空间够的话（20M左右）用路由本身的空间&lt;/h1&gt;
&lt;pre tabindex="0"&gt;&lt;code&gt;cd /tmp/mnt/disk/
tcpdump -i br-lan src host 192.168.1.126 -w ./target.cap
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;方法1：&lt;/p&gt;
&lt;p&gt;执行完命令后开始将电视机顶盒重启，到能正常播放电视台，随便播几个频道就可以了&lt;/p&gt;
&lt;p&gt;ssh客户端CTRL+C结束抓取&lt;/p&gt;
&lt;p&gt;scp或者使用Samba服务拷贝target.cap到本地&lt;/p&gt;
&lt;p&gt;方法2：&lt;/p&gt;
&lt;p&gt;执行完命令后开始将电视机顶盒换台，把所以需要抓取的电视台都换一遍&lt;/p&gt;
&lt;p&gt;换台完毕后ssh客户端CTRL+C结束抓取&lt;/p&gt;
&lt;p&gt;scp或者使用Samba服务拷贝target.cap到本地&lt;/p&gt;
&lt;p&gt;方法3：利用爱快本身的抓包功能，最简单，&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/piggo/202206201027465.png"&gt;
 &lt;img class="mx-auto" alt="image-20220620102310583" src="https://img-cloud.zhoujie218.top/piggo/202206201027465.png" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;h1 id="重点"&gt;重点：&lt;/h1&gt;
&lt;p&gt;通过Wireshark打开文件分析&lt;/p&gt;
&lt;p&gt;输入过滤信息rtsp，导出过滤结果，其中Info信息里的PLAY地址即为IPTV直播地址，可以通过播放器直接播放验证&lt;/p&gt;
&lt;p&gt;文件-导出分组解析结果 .txt&lt;/p&gt;
&lt;p&gt;打开excel，找到数据～来自文本～打开你保存的txt节目源（提前把双引号和问号替换成空格）～勾选分割符号下一步～勾选空格（要是还有别的需要分割的地方可以勾选其他，再填写文本中需要分割的符号）点下一步完成～然后你就看到节目名和节目源地址被分开了，然后把这两列复制下来粘贴到新建的excel2文档中，然后合并一下，中间记得加上英文下的逗号，合并完就可以了&lt;/p&gt;
&lt;p&gt;数据筛选 排序，可以直接选出节目单&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/wp-content/uploads/2021/09/20210901185903.jpg"&gt;
 &lt;img class="mx-auto" alt="https://img-cloud.zhoujie218.top/wp-content/uploads/2021/09/20210901185903.jpg" src="https://img-cloud.zhoujie218.top/wp-content/uploads/2021/09/20210901185903.jpg" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;h1 id="iptv数据分析"&gt;IPTV数据分析&lt;/h1&gt;
&lt;p&gt;1.用Wireshark打开刚才的“pcapng ”文件，然后在软件工具栏下面有个“过滤器工具栏”，在文本框中输入“http”，软件会过滤出http的协议内容。&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/piggo/202206201027998.jpeg"&gt;
 &lt;img class="mx-auto" alt="《Wireshark 抓 IPTV 数据包详细教程》" src="https://img-cloud.zhoujie218.top/piggo/202206201027998.jpeg" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;2.出来“http”协议的内容后别急，电脑上按下CTRL+F键，会在第一步中的“过滤器工具栏”下方出现一个查找框，在下图的左数第二个红框中下拉选择“字符串”，在左数第三个红框用输入我们要查找的关键字“channel”。&lt;/p&gt;
&lt;p&gt;
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/piggo/202206201027933.jpeg"&gt;
 &lt;img class="mx-auto" alt="《Wireshark 抓 IPTV 数据包详细教程》" src="https://img-cloud.zhoujie218.top/piggo/202206201027933.jpeg" /&gt;
 &lt;/a&gt;
 &lt;/p&gt;
&lt;p&gt;3.进行关键字“channel”查找后，软件就自动搜索出“channel”相关的数据流了。&lt;/p&gt;
&lt;p&gt;4.在软件右侧的“info”这一列，找到有关“HTTP/1.1 200 OK (text/html)”字样的数据行，随便哪一条都行，用鼠标选中它这一行数据，在菜单栏中选择『文件』→『导出对象』→『HTTP』。&lt;/p&gt;</description></item></channel></rss>