<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Bt on 周杰个人博客</title><link>/tags/bt/</link><description>Recent content in Bt on 周杰个人博客</description><generator>Hugo</generator><language>zh-CN</language><lastBuildDate>Wed, 05 Feb 2020 00:00:00 +0000</lastBuildDate><atom:link href="/tags/bt/index.xml" rel="self" type="application/rss+xml"/><item><title>BT(宝塔面板)-Panel service startup failed</title><link>/archives/1180.html</link><pubDate>Wed, 05 Feb 2020 00:00:00 +0000</pubDate><guid>/archives/1180.html</guid><description>&lt;p&gt;今天bt reload面板的时候遇到了Panel service startup failed这个错误，&lt;strong&gt;init&lt;/strong&gt;.py这种错误提示有好几处。这完全就是升级不当造成的，应该是大鸟从5.9升级到6.X的时候没有升级好。遗留了这种错误。&lt;/p&gt;
&lt;p&gt;大鸟升级的时候用的：BT(宝塔面板)5.9升级6.X-最牛叉的升级方案  这个升级方案，当时也是为了写这个教程，所以用了这个方法去升级，升级好了之后没什么大问题，但是遇到了两个错误，一个是宝塔终端不能用还有个就是 Panel service startup failed 这两个错误。&lt;/p&gt;
&lt;p&gt;[caption id=&amp;ldquo;attachment_1183&amp;rdquo; align=&amp;ldquo;alignnone&amp;rdquo; width=&amp;ldquo;1024&amp;rdquo;]
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/wp-content/uploads/2020/02/bt%e5%ae%9d%e5%a1%94%e9%9d%a2%e6%9d%bf-panel-service-startup-failed20200205-1024x465.jpg"&gt;
 &lt;img class="mx-auto" alt="BT(宝塔面板)-Panel service startup failed" src="https://img-cloud.zhoujie218.top/wp-content/uploads/2020/02/bt%e5%ae%9d%e5%a1%94%e9%9d%a2%e6%9d%bf-panel-service-startup-failed20200205-1024x465.jpg" /&gt;
 &lt;/a&gt;
 BT(宝塔面板)-Panel service startup failed[/caption]&lt;/p&gt;
&lt;p&gt;今天大鸟准备解决宝塔终端不能用的问题，却发现了 Panel service startup failed 想来也是用计划任务那个方式升级的时候一些底层的代码没有更新，造成了这种兼容性的问题。这个问题如何解决：&lt;/p&gt;
&lt;h4 id="第一修复重启面板"&gt;第一、修复重启面板&lt;/h4&gt;
&lt;p&gt;点击面板右上角修复，或者重启面板，这样有可能解决问题，如图：&lt;/p&gt;
&lt;p&gt;[caption id=&amp;ldquo;attachment_1184&amp;rdquo; align=&amp;ldquo;alignnone&amp;rdquo; width=&amp;ldquo;1024&amp;rdquo;]
 &lt;a data-fancybox="gallery" href="https://img-cloud.zhoujie218.top/wp-content/uploads/2020/02/bt%e5%ae%9d%e5%a1%94%e9%9d%a2%e6%9d%bf-panel-service-startup-failed20200205-1-1024x128.jpg"&gt;
 &lt;img class="mx-auto" alt="BT(宝塔面板)-Panel service startup failed" src="https://img-cloud.zhoujie218.top/wp-content/uploads/2020/02/bt%e5%ae%9d%e5%a1%94%e9%9d%a2%e6%9d%bf-panel-service-startup-failed20200205-1-1024x128.jpg" /&gt;
 &lt;/a&gt;
 BT(宝塔面板)-Panel service startup failed[/caption]&lt;/p&gt;
&lt;p&gt;看着大鸟的提示的错误，修复面板肯定不行，这是很严重的兼容性的问题，升级不恰当造成的。我们看下一种方法。&lt;/p&gt;
&lt;h4 id="第二重装面板"&gt;第二、重装面板&lt;/h4&gt;
&lt;p&gt;这个有点暴力了，但是大鸟只能用这个方法，我们可以ssh工具连接服务器，在命令行方式下面执行重装面板的命令。&lt;/p&gt;
&lt;p&gt;这里是6.X的面板所以大鸟这里贴下命令：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;yum install -y wget &amp;amp;&amp;amp; wget -O install.sh &lt;a href="http://download.bt.cn/install/install"&gt;http://download.bt.cn/install/install&lt;/a&gt;_6.0.sh &amp;amp;&amp;amp; bash install.sh&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;因为大鸟的面板环境都已经配置好，所以这个安装命令只是重新安装了面板，不会影响网站数据，当然，我们最好已经备份好了网站数据，让后来执行这个操作。&lt;/p&gt;
&lt;p&gt;安装好之后，所有的web环境都不会改变，不过面板登录密码会被重置，我们需要自己修改或者记下新的密码。&lt;/p&gt;
&lt;p&gt;到这里大鸟的问题解决了，连带宝塔终端不能用的问题都解决了，看来是升级不当造成的。&lt;/p&gt;
&lt;h4 id="第三python错误"&gt;第三、python错误&lt;/h4&gt;
&lt;p&gt;遇到这种错误解决起来容易点，错误代码如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Starting Bt-Panel… failed&lt;/li&gt;
&lt;li&gt;——————————————————&lt;/li&gt;
&lt;li&gt;Traceback (most recent call last):&lt;/li&gt;
&lt;li&gt;File “main.py”, line 101, in &lt;module&gt;&lt;/li&gt;
&lt;li&gt;if not os.path.exists(templatesConf): public.writeFile(templatesConf,’default’);&lt;/li&gt;
&lt;li&gt;AttributeError: ‘module’ object has no attribute ‘writeFile’&lt;/li&gt;
&lt;li&gt;——————————————————&lt;/li&gt;
&lt;li&gt;Error: BT-Panel service startup failed.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;错误原因：&lt;/p&gt;</description></item><item><title>群晖NAS中通过Docker安装CentOS并搭建宝塔控制面板</title><link>/archives/700.html</link><pubDate>Sun, 21 Jul 2019 00:00:00 +0000</pubDate><guid>/archives/700.html</guid><description>&lt;p&gt;群晖NAS中可以在套件中心安装Docker，让原来只是NAS的机器装上Linux Centos系统和Web控制面板&lt;/p&gt;
&lt;p&gt;首先用浏览器打开群晖DSM的WEB页面，地址为：ip地址:5000,登陆进去后打开“套件中心”，搜索“Docker”并安装&lt;/p&gt;
&lt;p&gt;打开“Docker”，左侧找到“注册表”，搜索“CentOS”，双击第一个的带官方标准和星数量5K的，然后选择标准为“latest”，就是最新版的CentOS 7.6 1809版本，点击选择后，会在左侧“映像”中下载&lt;/p&gt;
&lt;p&gt;下载完成群晖右上角的消息有提醒下载已完成，此版本容量大小为202MB&lt;/p&gt;
&lt;p&gt;在“映像”页面，选择&amp;quot;centos:latest&amp;quot;,然后点击左上角的“启动”，容器名称自定义，不可以有空格，如果有空格请使用这个横杠“-”代替&lt;/p&gt;
&lt;p&gt;点击“高级设置”，点击“卷”，点击“添加文件夹”，为了更方便的管理查看备份存储宝塔面板的数据，我这边将宝塔的目录存储在本地的docker文件夹下面的BT-Panel文件夹下面的www文件夹内，无文件夹可以自由添加文件夹，同时桌面的File Station也可以创建和查看文件夹，选择完成后，“转载路径”输入“/www”，意思就是将宝塔控制面板的www文件夹映射搭配本地的docker/BT-Panel/www文件夹内，不操作此步骤则数据都在Docker程序自身目录下&lt;/p&gt;
&lt;p&gt;宝塔面板默认有三个端口，控制面板端口8888，http端口80和https端口443，我们这边点击“网络”选项，勾选“使用与Docker Host相同网络”，这里我们就不进行端口映射了，如果有需求，那么左侧为自定义本地地址，右侧分别为宝塔的8888，80，443端口。&lt;/p&gt;
&lt;p&gt;配置完成后点击应用&lt;/p&gt;
&lt;p&gt;然后点击容器，双击CentOS7或点击后选择左上角的详情，启动容器中的CentOS7终端机&lt;/p&gt;
&lt;p&gt;接下来进去宝塔官网，地址为 &lt;a href="https://www.bt.cn/"&gt;&lt;/a&gt;&lt;a href="https://www.bt.cn/"&gt;https://www.bt.cn/&lt;/a&gt; ，网页中选择Linux版然后点立即安装&lt;/p&gt;
&lt;p&gt;找到Linux 面板 安装命令&lt;/p&gt;
&lt;p&gt;yum install -y wget &amp;amp;&amp;amp; wget -O install.sh &lt;a href="http://download.bt.cn/install/install_6.0.sh"&gt;&lt;/a&gt;&lt;a href="http://download.bt.cn/install/install_6.0.sh"&gt;http://download.bt.cn/install/install_6.0.sh&lt;/a&gt; &amp;amp;&amp;amp; sh install.sh&lt;/p&gt;
&lt;p&gt;复制安装命令，然后进去终端机，先按键盘的Ctrl+A，然后再按Ctrl+V才能粘贴，不然无法粘贴，粘贴完成回车&lt;/p&gt;
&lt;p&gt;提示是否安装，输入Y&lt;/p&gt;
&lt;p&gt;安装完成后出现地址，输入账号和密码即可正常登陆宝塔面板，默认情况完成后是你的外网ip，改成你的内网ip即可&lt;/p&gt;
&lt;p&gt;启宝塔服务，进入宝塔web管理，将php，mysql，apache等服务重新启动，不然可能出现一些未知错误&lt;/p&gt;
&lt;p&gt;bt default linux宝塔获取默认账号密码 ，用于忘记登录密码的zz，比如我 history 查看linux历史命令 /etc/init.d/bt start 启动宝塔命令&lt;/p&gt;</description></item></channel></rss>